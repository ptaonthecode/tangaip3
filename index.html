<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>M·ªôt c√¢u h·ªèi...</title>
    <!-- T·∫£i Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- T·∫£i font Inter -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        /* √Åp d·ª•ng font Inter l√†m font ch·ªØ m·∫∑c ƒë·ªãnh */
        body {
            font-family: 'Inter', sans-serif;
        }
        /* ƒê·∫£m b·∫£o n√∫t "Kh√¥ng" c√≥ hi·ªáu ·ª©ng chuy·ªÉn ƒë·ªông m∆∞·ª£t m√† */
        #noBtn {
            transition: all 0.3s ease-in-out;
        }
    </style>
</head>
<body class="bg-pink-100 flex items-center justify-center min-h-screen">

    <main class="w-full max-w-md p-8 bg-white rounded-lg shadow-xl text-center">

        <!-- 1. V√πng ch·ª©a c√¢u h·ªèi (Ban ƒë·∫ßu hi·ªÉn th·ªã) -->
        <!-- Th·∫ª ch·ª©a n√†y ph·∫£i l√† 'relative' ƒë·ªÉ n√∫t 'absolute' b√™n trong ho·∫°t ƒë·ªông ƒë√∫ng -->
        <div id="questionContainer" class="relative h-48">
            <h1 class="text-3xl font-bold text-gray-800 mb-6">
                L√†m ng∆∞·ªùi y√™u anh nh√©? üíñ
            </h1>
            
            <div class="flex justify-center gap-4">
                <!-- N√∫t "C√≥" (Th·ª±c ra l√† "Kh√¥ng" nh∆∞ng l·∫°i k√≠ch ho·∫°t "C√≥") -->
                <button id="yesBtn" class="px-6 py-3 bg-red-500 text-white font-semibold rounded-lg shadow-md hover:bg-red-600 transition-colors">
                    kh√¥ng!
                </button>
                
                <!-- N√∫t "Kh√¥ng" (Th·ª±c ra l√† "C√≥" nh∆∞ng l·∫°i ch·∫°y tr·ªën) -->
                <button id="noBtn" class="absolute px-6 py-3 bg-green-500 text-white font-semibold rounded-lg shadow-md hover:bg-green-600" style="left: 60%; top: 60%;">
                    d·∫°
                </button>
            </div>
        </div>

        <!-- 2. V√πng ch·ª©a Tr√¨nh t·∫£i (Ban ƒë·∫ßu b·ªã ·∫©n) -->
        <div id="heartLoader" class="hidden flex-col items-center justify-center">
            <!-- Bi·ªÉu t∆∞·ª£ng quay tr√≤n -->
            <div class="w-16 h-16 border-4 border-dashed border-pink-500 rounded-full animate-spin"></div>
            <p class="text-gray-600 mt-4">ƒêang x·ª≠ l√Ω t√¨nh y√™u...</p>
        </div>

        <!-- 3. V√πng ch·ª©a K·∫øt qu·∫£ (Ban ƒë·∫ßu b·ªã ·∫©n) -->
    <div id="resultContainer" class="hidden text-center">
        <!-- (S·ª¨A) Th√™m ID ƒë·ªÉ d·ªÖ d√†ng thay ƒë·ªïi vƒÉn b·∫£n -->
        <h2 id="resultTitle" class="text-3xl font-bold text-pink-600 mb-4">
            Yayy! Ch√∫ng ta h·ª£p nhau qu√°! üéâ
        </h2>
        <!-- (M·ªöI) Th√™m m·ªôt d√≤ng ƒë·ªÉ hi·ªÉn th·ªã ƒëi·ªÉm s·ªë -->
        <p id="resultScore" class="text-lg text-gray-700 mb-4"></p>
        <!-- 
             B·∫°n c√≥ th·ªÉ thay th·∫ø 'src' b√™n d∆∞·ªõi b·∫±ng URL GIF th·∫≠t
                v√≠ d·ª•: "https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjEx.../giphy.gif" 
            -->
            <img id="gifResult" 
                 src="https://placehold.co/300x300/fecaca/db2777?text=Yayy!%0A%3C3" 
                 alt="ƒÇn m·ª´ng" 
             class="w-full max-w-xs mx-auto rounded-lg shadow-lg">
    </div>

    <!-- 4. V√ôNG CH·ª®A QUIZ (M·ªöI) -->
    <div id="quizContainer" class="hidden flex-col items-center justify-center">
        <h2 class="text-2xl font-bold text-gray-800 mb-4">
            B·∫Øt ƒë·∫ßu ki·ªÉm tra ƒëi·ªÉm t∆∞∆°ng ƒë·ªìng...
        </h2>
        <!-- Th√™m chi·ªÅu cao c·ªë ƒë·ªãnh ƒë·ªÉ ti√™u ƒë·ªÅ kh√¥ng nh·∫£y khi ƒë·ªïi ch·ªØ -->
        <p id="quizQuestion" class="text-lg text-gray-700 mb-6 h-16 flex items-center justify-center">
            <!-- C√¢u h·ªèi s·∫Ω ƒë∆∞·ª£c t·∫£i v√†o ƒë√¢y -->
        </p>
        <div class="flex justify-center gap-4">
            <!-- ƒê·∫∑t chi·ªÅu r·ªông c·ªë ƒë·ªãnh ƒë·ªÉ n√∫t kh√¥ng thay ƒë·ªïi k√≠ch th∆∞·ªõc -->
            <button id="quizYesBtn" class="px-6 py-3 bg-green-500 text-white font-semibold rounded-lg shadow-md hover:bg-green-600 transition-colors w-24">
                C√≥
            </button>
            <button id="quizNoBtn" class="px-6 py-3 bg-red-500 text-white font-semibold rounded-lg shadow-md hover:bg-red-600 transition-colors w-24">
                Kh√¥ng
            </button>
        </div>
    </div>

</main>

<script>
    // L·∫•y c√°c ph·∫ßn t·ª≠ DOM
        const questionContainer = document.getElementById('questionContainer');
        const yesBtn = document.getElementById('yesBtn');
        const noBtn = document.getElementById('noBtn');
        const heartLoader = document.getElementById('heartLoader');
    const resultContainer = document.getElementById('resultContainer');
    
    // --- PH·∫¶N T·ª¨ QUIZ M·ªöI ---
    const quizContainer = document.getElementById('quizContainer');
    const quizQuestion = document.getElementById('quizQuestion');
    const quizYesBtn = document.getElementById('quizYesBtn');
    const quizNoBtn = document.getElementById('quizNoBtn');

    // --- C√ÇU H·ªéI QUIZ (ƒê√É C·∫¨P NH·∫¨T) ---
    // (T√¥i ƒë√£ c·∫≠p nh·∫≠t c√°c c√¢u h·ªèi n√†y ƒë·ªÉ so s√°nh v·ªõi s·ªü th√≠ch c·ªßa b·∫°n)
    // C·∫•u tr√∫c m·ªõi: { question: "C√¢u h·ªèi?", correctAnswer: 'yes'/'no' }
    const quizQuestions = [
        // C√°c c√¢u h·ªèi m·ªõi d·ª±a tr√™n s·ªü th√≠ch c·ªßa b·∫°n
        { question: "B·∫°n c√≥ th√≠ch n·∫•u ƒÉn ·ªü nh√† kh√¥ng?", correctAnswer: 'yes' },
        { question: "B·∫°n c√≥ th√≠ch leo n√∫i kh√¥ng?", correctAnswer: 'yes' },
        { question: "B·∫°n c√≥ th√≠ch nu√¥i m√®o kh√¥ng?", correctAnswer: 'yes' },
        { question: "B·∫°n c√≥ th√≠ch tr·ªìng hoa/c√¢y c·∫£nh kh√¥ng?", correctAnswer: 'yes' },
        { question: "B·∫°n c√≥ th√≠ch u·ªëng tr√† h∆°n c√† ph√™ kh√¥ng?", correctAnswer: 'yes' },
        { question: "B·∫°n c√≥ hay ng·∫Øm/ch·ª•p ·∫£nh b·∫ßu tr·ªùi kh√¥ng?", correctAnswer: 'yes' },
        { question: "B·∫°n c√≥ th√≠ch nu√¥i ch√≥ kh√¥ng?", correctAnswer: 'yes' },
        // C√°c c√¢u h·ªèi c≈© (t√¥i s·∫Ω gi·∫£ ƒë·ªãnh c√¢u tr·∫£ l·ªùi cho ch√∫ng)
        { question: "B·∫°n c√≥ ph·∫£i l√† ng∆∞·ªùi hay d·∫≠y s·ªõm kh√¥ng?", correctAnswer: 'yes' }, // Ng∆∞·ªùi leo n√∫i th∆∞·ªùng d·∫≠y s·ªõm
        { question: "B·∫°n th√≠ch bi·ªÉn kh√¥ng?", correctAnswer: 'no' }, // V√¨ b·∫°n th√≠ch n√∫i
        // (M·ªöI) C√¢u h·ªèi cu·ªëi c√πng
        { question: "Ngo√†i anh ra em th√≠ch ai kh√°c kh√¥ng?", correctAnswer: 'no' }
    ];
    let currentQuestionIndex = 0;
    let score = 0; // Bi·∫øn ƒë·ªÉ t√≠nh ƒëi·ªÉm
    let quizDone = false; // (M·ªöI) C·ªù ƒë·ªÉ theo d√µi tr·∫°ng th√°i quiz

    // L·∫•y ti√™u ƒë·ªÅ c√¢u h·ªèi ban ƒë·∫ßu
    const originalQuestionTitle = questionContainer.querySelector('h1');
    const gifResult = document.getElementById('gifResult');
    
    // --- H√ÄM T·∫¢I C√ÇU H·ªéI ---
    function loadQuestion(index) {
        if (index < quizQuestions.length) {
            // (S·ª¨A) L·∫•y c√¢u h·ªèi t·ª´ ƒë·ªëi t∆∞·ª£ng
            quizQuestion.textContent = quizQuestions[index].question;
        } else {
            // Quiz k·∫øt th√∫c
            showQuizResult(); // (S·ª¨A) ƒê·ªïi t√™n h√†m
        }
    }

    // --- H√ÄM X·ª¨ L√ù TR·∫¢ L·ªúI QUIZ (S·ª¨A) ---
    function handleQuizAnswer(userAnswer) {
        // L·∫•y c√¢u tr·∫£ l·ªùi ƒë√∫ng c·ªßa c√¢u h·ªèi hi·ªán t·∫°i
        const correct = quizQuestions[currentQuestionIndex].correctAnswer;

        // So s√°nh v√† tƒÉng ƒëi·ªÉm
        if (userAnswer === correct) {
            score++;
        }
        
        // Chuy·ªÉn sang c√¢u h·ªèi ti·∫øp theo
        currentQuestionIndex++;
        loadQuestion(currentQuestionIndex);
    }

    // --- H√ÄM HI·ªÇN TH·ªä K·∫æT QU·∫¢ QUIZ (S·ª¨A T√äN) ---
    function showQuizResult() {
        quizContainer.style.display = "none";
        quizDone = true; // (M·ªöI) ƒê·∫∑t c·ªù l√† quiz ƒë√£ xong

        // L·∫•y c√°c ph·∫ßn t·ª≠ k·∫øt qu·∫£
        const resultTitle = document.getElementById('resultTitle');
        const resultScore = document.getElementById('resultScore');
        const totalQuestions = quizQuestions.length;
        
        // T√≠nh to√°n th√¥ng ƒëi·ªáp d·ª±a tr√™n ƒëi·ªÉm s·ªë
        let titleMessage = "";
        if (score >= totalQuestions * 0.8) { // > 80%
            titleMessage = "Tr·ªùi ∆°i! Ch√∫ng ta gi·ªëng nhau qu√°! üéâ";
        } else if (score >= totalQuestions * 0.5) { // > 50%
            titleMessage = "Yayy! Ch√∫ng ta kh√° h·ª£p nhau ƒë√≥! üòä";
        } else {
            titleMessage = "Hmm, c√≥ v·∫ª ch√∫ng ta l√† hai c·ª±c tr√°i d·∫•u! üòÖ";
        }

        // Hi·ªÉn th·ªã k·∫øt qu·∫£
        resultTitle.textContent = titleMessage;
        resultScore.textContent = `ƒêi·ªÉm t∆∞∆°ng ƒë·ªìng c·ªßa ch√∫ng ta l√†: ${score} / ${totalQuestions}`;
        
        resultContainer.style.display = "block";

        // (M·ªöI) ƒê·∫∑t h·∫πn gi·ªù ƒë·ªÉ quay l·∫°i c√¢u h·ªèi ch√≠nh
        setTimeout(backToQuestion, 4000); // 4 gi√¢y
    }

    // (M·ªöI) H√ÄM QUAY L·∫†I C√ÇU H·ªéI CH√çNH
    function backToQuestion() {
        resultContainer.style.display = "none";

        // Thay ƒë·ªïi c√¢u h·ªèi
        originalQuestionTitle.textContent = "V·∫≠y... ƒë·ªìng √Ω th·∫≠t nh√©?";
        
        // ·∫®n n√∫t "kh√¥ng!"
        yesBtn.style.display = 'none';
        
        // Thay ƒë·ªïi n√∫t "d·∫°"
        noBtn.textContent = 'Em ƒë·ªìng √Ω! ‚ù§Ô∏è';
        noBtn.style.position = 'relative'; // ƒê∆∞a n√≥ tr·ªü l·∫°i lu·ªìng b√¨nh th∆∞·ªùng
        noBtn.style.left = 'auto';
        noBtn.style.top = 'auto';

        // Hi·ªÉn th·ªã l·∫°i v√πng c√¢u h·ªèi
        questionContainer.style.display = "block";
    }

    // (M·ªöI) H√ÄM X√ÅC NH·∫¨N CU·ªêI C√ôNG
    function showFinalConfirmation() {
        questionContainer.style.display = "none";
        
        // C·∫≠p nh·∫≠t th√¥ng ƒëi·ªáp chi·∫øn th·∫Øng
        resultTitle.textContent = "Yayy! Anh y√™u em! üéâ";
        resultScore.textContent = "Ch√∫ng ta l√† m·ªôt c·∫∑p tr·ªùi sinh!";
        // (M·ªöI) Thay ƒë·ªïi GIF
        gifResult.src = 'https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExajI0cnRleGNiNnBleDA4aWxncGk0b3U1M3BnejJoZnd2cWc2eHF5biZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/26FL1zoxbUVIQW7cI/giphy.gif';

        resultContainer.style.display = "block";
    }

    // G·∫Øn s·ª± ki·ªán cho c√°c n√∫t quiz (S·ª¨A)
    // Gi·ªù ƒë√¢y ch√∫ng ta truy·ªÅn 'yes' ho·∫∑c 'no' v√†o h√†m
    quizYesBtn.addEventListener("click", () => handleQuizAnswer('yes'));
    quizNoBtn.addEventListener("click", () => handleQuizAnswer('no'));


    // S·ª± ki·ªán khi nh·∫•p v√†o n√∫t "C√≥" (n√∫t 'kh√¥ng!')
    yesBtn.addEventListener("click", () => {
            // ·∫®n c√¢u h·ªèi v√† hi·ªÉn th·ªã tr√¨nh t·∫£i
            questionContainer.style.display = "none";
            // S·ª≠ d·ª•ng 'flex' v√¨ ch√∫ng ta ƒë√£ thi·∫øt k·∫ø n√≥ v·ªõi flexbox
            heartLoader.style.display = "flex"; 

        // ƒê·∫∑t th·ªùi gian ch·ªù 3 gi√¢y (3000 mili gi√¢y)
        const timeoutId = setTimeout(() => {
            // ·∫®n tr√¨nh t·∫£i v√† hi·ªÉn th·ªã QUIZ (thay v√¨ k·∫øt qu·∫£)
            heartLoader.style.display = "none";
            quizContainer.style.display = "flex"; // Hi·ªÉn th·ªã quiz
            loadQuestion(currentQuestionIndex); // T·∫£i c√¢u h·ªèi ƒë·∫ßu ti√™n
        }, 3000);
    });

    // S·ª± ki·ªán khi di chu·ªôt qua n√∫t "Kh√¥ng" (n√∫t 'd·∫°')
        // --- T·ªêI ∆ØU H√ìA: Chuy·ªÉn logic ra h√†m ri√™ng ---
        const moveNoButton = () => {
            // (M·ªöI) N·∫øu quiz ƒë√£ xong, kh√¥ng ch·∫°y n·ªØa
            if (quizDone) return;

            // L·∫•y k√≠ch th∆∞·ªõc c·ªßa v√πng ch·ª©a
            const containerWidth = questionContainer.offsetWidth;
            const containerHeight = questionContainer.offsetHeight;
            
            // L·∫•y k√≠ch th∆∞·ªõc c·ªßa ch√≠nh n√∫t "Kh√¥ng"
            const btnWidth = noBtn.offsetWidth;
            const btnHeight = noBtn.offsetHeight;

            // T√≠nh to√°n v·ªã tr√≠ ng·∫´u nhi√™n m·ªõi
            // Tr·ª´ ƒëi k√≠ch th∆∞·ªõc c·ªßa n√∫t ƒë·ªÉ n√≥ kh√¥ng bao gi·ªù ch·∫°y ra ngo√†i l·ªÅ
            const newX = Math.floor(Math.random() * (containerWidth - btnWidth));
            const newY = Math.floor(Math.random() * (containerHeight - btnHeight));

            // √Åp d·ª•ng v·ªã tr√≠ m·ªõi cho n√∫t
            noBtn.style.left = `${newX}px`;
            noBtn.style.top = `${newY}px`;
        };

        // --- G·∫Øn s·ª± ki·ªán cho c·∫£ m√°y t√≠nh v√† di ƒë·ªông ---

        // D√†nh cho m√°y t√≠nh (di chu·ªôt)
        noBtn.addEventListener("mouseover", moveNoButton);

        // D√†nh cho di ƒë·ªông (ch·∫°m v√†o)
        noBtn.addEventListener("touchstart", (e) => {
            // NgƒÉn h√†nh vi m·∫∑c ƒë·ªãnh c·ªßa tr√¨nh duy·ªát (nh∆∞ cu·ªôn trang khi ch·∫°m)
            e.preventDefault();
            moveNoButton();
        });

        // (M·ªöI) G·∫Øn s·ª± ki·ªán click cho n√∫t "d·∫°" (noBtn)
        noBtn.addEventListener("click", () => {
            // Ch·ªâ ho·∫°t ƒë·ªông sau khi quiz ƒë√£ xong
            if (quizDone) {
                showFinalConfirmation();
            }
        });
    </script>

</body>
</html>

